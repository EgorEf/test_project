(this.webpackJsonptest_project=this.webpackJsonptest_project||[]).push([[0],{81:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),i=n(28),s=n.n(i),o=(n(81),n(82),n(83),n(84),n(85),n(20)),u=n(58),l=n(43),j=n(15),d=n(138),b=n(35),h=n(5),m=n(139),O=n(4),p=n(50),x=n(14),f=n(126),v=n(133),g=n(140),w=n(135),y=n(137),k=n(59),R=n(23),C=Object(k.a)({reducerPath:"authApi",baseQuery:Object(R.d)({baseUrl:"https://my-json-server.typicode.com/EgorEf/fake-server/"}),endpoints:function(e){return{login:e.mutation({query:function(e){return{url:"users",params:{email:e.email,password:e.password},validateStatus:function(e,t){return 200===e.status&&0!==t.length}}},transformResponse:function(e){return Object(x.a)(e,1)[0]}})}}}),E=C.useLoginMutation,S=n(19),P=n(21),q=n(7),M=n(31),W=n(60),A=n.n(W),B=Object(q.d)({name:"auth",initialState:{user:null},reducers:{},extraReducers:function(e){e.addMatcher(C.endpoints.login.matchFulfilled,(function(e,t){var n=t.payload;e.user=n}))}}),F=function(e){return e.auth.user},I=B.reducer,J={key:"root",version:1,storage:A.a,blacklist:[C.reducerPath]},L=Object(P.b)(Object(O.a)({auth:I},C.reducerPath,C.reducer)),T=Object(M.g)(J,L),_=Object(q.a)({reducer:T,middleware:function(e){return function(e){return[].concat(Object(S.a)(e({serializableCheck:{ignoredActions:[M.a,M.f,M.b,M.c,M.d,M.e]}})),[C.middleware])}(e)}}),z=Object(M.h)(_),D=n(2),G={mb:3},H=function(){var e=Object(j.g)(),t=Object(j.f)(),n=Object(a.useState)({email:"",password:"",isRemember:!1}),r=Object(x.a)(n,2),c=r[0],i=r[1],s=E(),o=Object(x.a)(s,2),u=o[0],l=o[1],d=l.isError,b=l.isLoading,h=function(e){var t=e.target,n=t.value,r=t.name,a=t.checked,c="isRemember"===r?a:n;i((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(O.a)({},r,c))}))};return Object(D.jsxs)(f.a,{component:"form",sx:{width:1},onSubmit:function(n){n.preventDefault();var r={email:c.email,password:c.password};!function(e){e?z.persist():z.pause()}(c.isRemember),u(r).unwrap().then((function(){var n,r,a=(null===(n=t.state)||void 0===n||null===(r=n.from)||void 0===r?void 0:r.pathname)||"/";e(a,{replace:!0})})).catch((function(e){return console.error(e,"Error")}))},children:[Object(D.jsx)(v.a,{id:"email",name:"email",label:"\u041b\u043e\u0433\u0438\u043d",variant:"outlined",error:d,type:"email",onChange:h,sx:G,required:!0}),Object(D.jsx)(v.a,{id:"password",name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",error:d,variant:"outlined",type:"password",onChange:h,helperText:d?"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!":" ",FormHelperTextProps:{error:d,sx:{mt:"15px"}},required:!0}),Object(D.jsx)(g.a,{id:"isRemember",name:"isRemember",control:Object(D.jsx)(w.a,{}),onChange:h,checked:c.isRemember,label:"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f",sx:G}),Object(D.jsx)(y.a,{variant:"contained",type:"submit",disabled:b,children:"\u0412\u043e\u0439\u0442\u0438"})]})},Q=Object(h.a)("div")(r||(r=Object(b.a)(["\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  height: '100%',\n  width: '100%',\n"]))),U=function(){return Object(D.jsxs)(d.a,{maxWidth:"xs",sx:{pt:30},children:[Object(D.jsx)(m.a,{variant:"h5",align:"center",mb:3,children:"\u0412\u0445\u043e\u0434"}),Object(D.jsx)(Q,{children:Object(D.jsx)(H,{})})]})},$=o.e,K=function(e){var t=e.children,n=$(F),r=Object(j.f)();return n?t:Object(D.jsx)(j.a,{to:"/login",state:{from:r}})},N=function(){return Object(D.jsx)("h1",{children:"\u0414\u0435\u043f\u043e\u0437\u0438\u0442\u043d\u044b\u0439 \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440"})},V=function(){return Object(D.jsx)("h1",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0435\u043f\u043e\u0437\u0438\u0442\u043d\u044b\u0445 \u0437\u0430\u044f\u0432\u043e\u043a (\u0430\u0434\u043c\u0438\u043d\u043a\u0430)"})},X=function(){var e=$(F);return"admin"===(null===e||void 0===e?void 0:e.role)?Object(D.jsx)(V,{}):Object(D.jsx)(N,{})},Y=function(){return Object(D.jsx)(m.a,{variant:"h3",align:"center",mb:3,children:"\u041e\u0448\u0438\u0431\u043a\u0430! \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0438\u043b\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430."})},Z=function(){return Object(D.jsx)(d.a,{sx:{height:"100vh"},disableGutters:!0,children:Object(D.jsx)(l.a,{children:Object(D.jsxs)(j.d,{children:[Object(D.jsx)(j.b,{path:"/",element:Object(D.jsx)(K,{children:Object(D.jsx)(X,{})})}),Object(D.jsx)(j.b,{path:"login",element:Object(D.jsx)(U,{})}),Object(D.jsx)(j.b,{path:"*",element:Object(D.jsx)(Y,{})})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(D.jsx)(c.a.StrictMode,{children:Object(D.jsx)(o.a,{store:_,children:Object(D.jsx)(u.a,{loading:null,persistor:z,children:Object(D.jsx)(Z,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[94,1,2]]]);
//# sourceMappingURL=main.980ee952.chunk.js.map